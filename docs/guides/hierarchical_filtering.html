

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Hierarchical History Filtering &mdash; AI Agent Framework 2.2.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=9dad161f" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=b21de401"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Framework Architecture &amp; Workflow" href="architecture_workflow.html" />
    <link rel="prev" title="Legacy Guides" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            AI Agent Framework
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Part 1: Orientation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../part1_orientation/index.html">Part 1: Orientation &amp; Quick Wins</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../part1_orientation/overview.html">Product Overview &amp; Capabilities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../part1_orientation/overview.html#what-is-the-ai-agent-framework">What is the AI Agent Framework?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part1_orientation/overview.html#key-differentiators">Key Differentiators</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part1_orientation/overview.html#target-personas">Target Personas</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part1_orientation/overview.html#architecture-at-a-glance">Architecture at a Glance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part1_orientation/overview.html#public-api">Public API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part1_orientation/overview.html#installation">Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part1_orientation/overview.html#getting-started-with-a-sample-project">Getting Started with a Sample Project</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part1_orientation/overview.html#sample-project-features">Sample Project Features</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part1_orientation/overview.html#cli-commands">CLI Commands</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part1_orientation/overview.html#quick-example">Quick Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part1_orientation/overview.html#what-s-next">What’s Next?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../part1_orientation/quickstart.html">Quickstart (5 minutes)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../part1_orientation/quickstart.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part1_orientation/quickstart.html#installation">Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part1_orientation/quickstart.html#scaffold-a-sample-project-recommended">Scaffold a Sample Project (Recommended)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part1_orientation/quickstart.html#your-first-agent-from-scratch">Your First Agent (From Scratch)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part1_orientation/quickstart.html#using-yaml-configuration">Using YAML Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part1_orientation/quickstart.html#running-the-test-suite">Running the Test Suite</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part1_orientation/quickstart.html#project-structure">Project Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part1_orientation/quickstart.html#common-tasks">Common Tasks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part1_orientation/quickstart.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../part1_orientation/conceptual_model.html">Conceptual Model</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../part1_orientation/conceptual_model.html#core-philosophy">Core Philosophy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part1_orientation/conceptual_model.html#the-agent-loop">The Agent Loop</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part1_orientation/conceptual_model.html#core-components">Core Components</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part1_orientation/conceptual_model.html#planner">1. Planner</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part1_orientation/conceptual_model.html#tool">2. Tool</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part1_orientation/conceptual_model.html#memory">3. Memory</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part1_orientation/conceptual_model.html#gateway-llm-provider">4. Gateway (LLM Provider)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part1_orientation/conceptual_model.html#policy">5. Policy</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part1_orientation/conceptual_model.html#eventbus">6. EventBus</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part1_orientation/conceptual_model.html#hierarchical-architecture">Hierarchical Architecture</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part1_orientation/conceptual_model.html#agent-vs-manageragent">Agent vs ManagerAgent</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part1_orientation/conceptual_model.html#data-flow">Data Flow</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part1_orientation/conceptual_model.html#action">Action</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part1_orientation/conceptual_model.html#finalresponse">FinalResponse</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part1_orientation/conceptual_model.html#message-types">Message Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part1_orientation/conceptual_model.html#configuration">Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part1_orientation/conceptual_model.html#what-s-next">What’s Next?</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Part 2: Runtime Building Blocks</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../part2_runtime/index.html">Part 2: Runtime Building Blocks</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../part2_runtime/agents.html">Agents &amp; Manager Stack</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/agents.html#agent-worker-agent">Agent (Worker Agent)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/agents.html#constructor">Constructor</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/agents.html#required-policies">Required Policies</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/agents.html#running-an-agent">Running an Agent</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/agents.html#execution-loop">Execution Loop</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/agents.html#event-emission">Event Emission</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/agents.html#manageragent-orchestrator-manager">ManagerAgent (Orchestrator/Manager)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/agents.html#id1">Constructor</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/agents.html#workers-dictionary">Workers Dictionary</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/agents.html#delegation-flow">Delegation Flow</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/agents.html#parallel-execution">Parallel Execution</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/agents.html#synthesis">Synthesis</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/agents.html#id2">Event Emission</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/agents.html#orchestrator-vs-manager">Orchestrator vs Manager</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/agents.html#hierarchy-example">Hierarchy Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/agents.html#complete-example">Complete Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/agents.html#best-practices">Best Practices</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../part2_runtime/memory.html">Memory &amp; Message Stores</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/memory.html#async-safe-memory">Async-Safe Memory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/memory.html#basememory-interface">BaseMemory Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/memory.html#memory-implementations">Memory Implementations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/memory.html#inmemorymemory">InMemoryMemory</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/memory.html#sharedinmemorymemory">SharedInMemoryMemory</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/memory.html#messagestorememory">MessageStoreMemory</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/memory.html#hierarchicalmessagestorememory">HierarchicalMessageStoreMemory</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/memory.html#async-safe-sharedstatestore">Async-Safe SharedStateStore</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/memory.html#message-format">Message Format</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/memory.html#conversation-types">Conversation Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/memory.html#execution-trace-types">Execution Trace Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/memory.html#completion-types">Completion Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/memory.html#planning-types">Planning Types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/memory.html#basemessagestore-interface">BaseMessageStore Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/memory.html#message-builder-utilities">Message Builder Utilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/memory.html#memory-in-yaml-configuration">Memory in YAML Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/memory.html#hierarchical-visibility">Hierarchical Visibility</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/memory.html#history-filtering">History Filtering</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/memory.html#migration-guide">Migration Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/memory.html#best-practices">Best Practices</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/memory.html#complete-example">Complete Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../part2_runtime/tools.html">Tools &amp; Decorators</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/tools.html#the-tool-decorator">The &#64;tool Decorator</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/tools.html#features">Features</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/tools.html#usage-patterns">Usage Patterns</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/tools.html#docstring-parsing">Docstring Parsing</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/tools.html#functionaltool-class">FunctionalTool Class</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/tools.html#properties">Properties</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/tools.html#methods">Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/tools.html#class-based-tools">Class-Based Tools</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/tools.html#when-to-use-class-based-tools">When to Use Class-Based Tools</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/tools.html#tool-registration">Tool Registration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/tools.html#yaml-configuration">YAML Configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/tools.html#tool-output-patterns">Tool Output Patterns</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/tools.html#simple-return">Simple Return</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/tools.html#structured-return">Structured Return</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/tools.html#error-handling">Error Handling</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/tools.html#best-practices">Best Practices</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/tools.html#built-in-utility-tools">Built-in Utility Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/tools.html#complete-example">Complete Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../part2_runtime/planners.html">Planners &amp; Gateways</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/planners.html#baseplanner-interface">BasePlanner Interface</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/planners.html#return-types">Return Types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/planners.html#planner-implementations">Planner Implementations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/planners.html#staticplanner">StaticPlanner</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/planners.html#singleactionplanner">SingleActionPlanner</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/planners.html#llmrouterplanner">LLMRouterPlanner</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/planners.html#reactplanner">ReActPlanner</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/planners.html#chatplanner">ChatPlanner</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/planners.html#strategicplanner">StrategicPlanner</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/planners.html#strategicdecomposerplanner">StrategicDecomposerPlanner</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/planners.html#workerrouterplanner">WorkerRouterPlanner</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/planners.html#managerscriptplanner">ManagerScriptPlanner</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/planners.html#history-filtering">History Filtering</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/planners.html#inference-gateways">Inference Gateways</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/planners.html#baseinferencegateway">BaseInferenceGateway</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/planners.html#openaigateway">OpenAIGateway</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/planners.html#googleaigateway">GoogleAIGateway</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/planners.html#mockgateway">MockGateway</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/planners.html#yaml-configuration">YAML Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/planners.html#environment-variables">Environment Variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/planners.html#custom-planner-example">Custom Planner Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/planners.html#best-practices">Best Practices</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../part2_runtime/policies.html">Policies &amp; Presets</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/policies.html#philosophy">Philosophy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/policies.html#policy-types">Policy Types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/policies.html#completiondetector">CompletionDetector</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/policies.html#terminationpolicy">TerminationPolicy</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/policies.html#looppreventionpolicy">LoopPreventionPolicy</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/policies.html#hitlpolicy-human-in-the-loop">HITLPolicy (Human-in-the-Loop)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/policies.html#checkpointpolicy">CheckpointPolicy</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/policies.html#followuppolicy">FollowUpPolicy</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/policies.html#policy-presets">Policy Presets</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/policies.html#preset-simple">Preset: <code class="docutils literal notranslate"><span class="pre">simple</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/policies.html#preset-with-hitl">Preset: <code class="docutils literal notranslate"><span class="pre">with_hitl</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/policies.html#preset-with-checkpoints">Preset: <code class="docutils literal notranslate"><span class="pre">with_checkpoints</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/policies.html#using-policies">Using Policies</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/policies.html#with-agent">With Agent</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/policies.html#custom-policies">Custom Policies</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/policies.html#yaml-configuration">YAML Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/policies.html#custom-policy-example">Custom Policy Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/policies.html#environment-variables">Environment Variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/policies.html#best-practices">Best Practices</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../part2_runtime/context_services.html">Context &amp; Services</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/context_services.html#request-context">Request Context</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/context_services.html#why-contextvars">Why contextvars?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/context_services.html#api">API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/context_services.html#usage-pattern">Usage Pattern</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/context_services.html#thread-pool-propagation">Thread Pool Propagation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/context_services.html#context-builder">Context Builder</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/context_services.html#registering-services">Registering Services</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/context_services.html#policy-engine">Policy Engine</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/context_services.html#tool-deny-policies">Tool Deny Policies</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/context_services.html#services-in-yaml">Services in YAML</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/context_services.html#best-practices">Best Practices</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/context_services.html#complete-example">Complete Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../part2_runtime/observability.html">Observability &amp; Streaming</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/observability.html#eventbus">EventBus</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/observability.html#event-types">Event Types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/observability.html#agent-events">Agent Events</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/observability.html#manager-events">Manager Events</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/observability.html#orchestrator-events">Orchestrator Events</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/observability.html#other-events">Other Events</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/observability.html#event-subscribers">Event Subscribers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/observability.html#baseeventsubscriber">BaseEventSubscriber</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/observability.html#loggingsubscriber">LoggingSubscriber</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/observability.html#phoenixsubscriber">PhoenixSubscriber</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/observability.html#langfusesubscriber">LangfuseSubscriber</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/observability.html#progress-handlers">Progress Handlers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/observability.html#event-filtering">Event Filtering</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/observability.html#environment-variable">Environment Variable</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/observability.html#phoenix-configuration">Phoenix Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/observability.html#llm-pricing">LLM Pricing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/observability.html#complete-example">Complete Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/observability.html#viewing-traces">Viewing Traces</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/observability.html#phoenix-ui">Phoenix UI</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part2_runtime/observability.html#langfuse">Langfuse</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part2_runtime/observability.html#best-practices">Best Practices</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Part 3: Building Solutions</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../part3_solutions/index.html">Part 3: Building Solutions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../part3_solutions/configuration.html">Declarative Configuration &amp; AgentFactory</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../part3_solutions/configuration.html#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part3_solutions/configuration.html#yaml-configuration-structure">YAML Configuration Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part3_solutions/configuration.html#agentfactory">AgentFactory</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part3_solutions/configuration.html#factory-features">Factory Features</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part3_solutions/configuration.html#component-registration">Component Registration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part3_solutions/configuration.html#configuration-sections">Configuration Sections</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part3_solutions/configuration.html#resources">Resources</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part3_solutions/configuration.html#planner">Planner</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part3_solutions/configuration.html#memory">Memory</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part3_solutions/configuration.html#policies">Policies</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part3_solutions/configuration.html#tools-list">Tools List</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part3_solutions/configuration.html#manager-agent-configuration">Manager Agent Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part3_solutions/configuration.html#variable-expansion">Variable Expansion</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part3_solutions/configuration.html#setting-context-variables">Setting Context Variables</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part3_solutions/configuration.html#configuration-inheritance">Configuration Inheritance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part3_solutions/configuration.html#agent-config-schema">Agent Config Schema</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part3_solutions/configuration.html#best-practices">Best Practices</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../part3_solutions/flows.html">Flow Orchestration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../part3_solutions/flows.html#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part3_solutions/flows.html#flowfactory">FlowFactory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part3_solutions/flows.html#flow-definition">Flow Definition</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part3_solutions/flows.html#flowstep">FlowStep</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part3_solutions/flows.html#step-properties">Step Properties</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part3_solutions/flows.html#dependency-management">Dependency Management</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part3_solutions/flows.html#parallel-execution">Parallel Execution</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part3_solutions/flows.html#conditional-steps">Conditional Steps</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part3_solutions/flows.html#result-handling">Result Handling</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part3_solutions/flows.html#accessing-step-results">Accessing Step Results</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part3_solutions/flows.html#output-combination">Output Combination</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part3_solutions/flows.html#programmatic-flows">Programmatic Flows</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part3_solutions/flows.html#error-handling">Error Handling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part3_solutions/flows.html#flow-hooks">Flow Hooks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part3_solutions/flows.html#best-practices">Best Practices</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../part3_solutions/job_state.html">Scripts, Job State &amp; Approvals</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../part3_solutions/job_state.html#scriptplan">ScriptPlan</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part3_solutions/job_state.html#scriptplan-fields">ScriptPlan Fields</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part3_solutions/job_state.html#basejobstore">BaseJobStore</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part3_solutions/job_state.html#filejobstore">FileJobStore</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part3_solutions/job_state.html#job-structure">Job Structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part3_solutions/job_state.html#pendingaction">PendingAction</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part3_solutions/job_state.html#approval-lifecycle">Approval Lifecycle</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part3_solutions/job_state.html#action-requires-approval">1. Action Requires Approval</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part3_solutions/job_state.html#user-approves-denies">2. User Approves/Denies</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part3_solutions/job_state.html#resume-execution">3. Resume Execution</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part3_solutions/job_state.html#resume-tokens">Resume Tokens</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part3_solutions/job_state.html#executed-actions-tracking">Executed Actions Tracking</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part3_solutions/job_state.html#custom-job-store">Custom Job Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part3_solutions/job_state.html#using-job-store-with-manageragent">Using Job Store with ManagerAgent</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part3_solutions/job_state.html#best-practices">Best Practices</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../part3_solutions/message_stores.html">Message Stores &amp; Integrations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../part3_solutions/message_stores.html#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part3_solutions/message_stores.html#architecture">Architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part3_solutions/message_stores.html#implementing-basemessagestore">Implementing BaseMessageStore</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part3_solutions/message_stores.html#using-messagestorememory">Using MessageStoreMemory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part3_solutions/message_stores.html#hierarchicalmessagestorememory">HierarchicalMessageStoreMemory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part3_solutions/message_stores.html#message-format-specification">Message Format Specification</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part3_solutions/message_stores.html#required-fields">Required Fields</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part3_solutions/message_stores.html#optional-fields">Optional Fields</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part3_solutions/message_stores.html#type-constants">Type Constants</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part3_solutions/message_stores.html#message-builder-utilities">Message Builder Utilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part3_solutions/message_stores.html#complete-integration-example">Complete Integration Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part3_solutions/message_stores.html#best-practices">Best Practices</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../part3_solutions/deployment.html">Deployment &amp; Runtime Operations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../part3_solutions/deployment.html#server-deployment">Server Deployment</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part3_solutions/deployment.html#fastapi-websocket-server">FastAPI WebSocket Server</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part3_solutions/deployment.html#rest-api">REST API</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part3_solutions/deployment.html#environment-variables">Environment Variables</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part3_solutions/deployment.html#required">Required</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part3_solutions/deployment.html#optional-llm">Optional - LLM</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part3_solutions/deployment.html#optional-observability">Optional - Observability</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part3_solutions/deployment.html#optional-behavior">Optional - Behavior</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part3_solutions/deployment.html#optional-storage">Optional - Storage</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part3_solutions/deployment.html#docker-deployment">Docker Deployment</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part3_solutions/deployment.html#dockerfile">Dockerfile</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part3_solutions/deployment.html#docker-compose-yml">docker-compose.yml</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part3_solutions/deployment.html#manifest-docs-server">Manifest &amp; Docs Server</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part3_solutions/deployment.html#generate-manifest">Generate Manifest</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part3_solutions/deployment.html#serve-docs">Serve Docs</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part3_solutions/deployment.html#health-checks">Health Checks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part3_solutions/deployment.html#logging">Logging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part3_solutions/deployment.html#scaling">Scaling</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part3_solutions/deployment.html#horizontal-scaling">Horizontal Scaling</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part3_solutions/deployment.html#connection-pooling">Connection Pooling</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part3_solutions/deployment.html#best-practices">Best Practices</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Part 4: Extensibility Cookbook</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../part4_cookbook/index.html">Part 4: Extensibility Cookbook</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../part4_cookbook/custom_planner.html">Recipe: Custom Planner</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../part4_cookbook/custom_planner.html#goal">Goal</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part4_cookbook/custom_planner.html#implementation">Implementation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part4_cookbook/custom_planner.html#registration">Registration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part4_cookbook/custom_planner.html#yaml-usage">YAML Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part4_cookbook/custom_planner.html#testing">Testing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part4_cookbook/custom_planner.html#key-points">Key Points</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../part4_cookbook/custom_tool.html">Recipe: Custom Tool</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../part4_cookbook/custom_tool.html#goal">Goal</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part4_cookbook/custom_tool.html#method-1-tool-decorator-simple">Method 1: &#64;tool Decorator (Simple)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part4_cookbook/custom_tool.html#method-2-class-based-with-state">Method 2: Class-Based (With State)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part4_cookbook/custom_tool.html#registration">Registration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part4_cookbook/custom_tool.html#yaml-usage">YAML Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part4_cookbook/custom_tool.html#error-handling">Error Handling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part4_cookbook/custom_tool.html#key-points">Key Points</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../part4_cookbook/progress_subscriber.html">Recipe: Progress Subscriber</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../part4_cookbook/progress_subscriber.html#goal">Goal</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part4_cookbook/progress_subscriber.html#custom-eventsubscriber">Custom EventSubscriber</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part4_cookbook/progress_subscriber.html#custom-progresshandler-async">Custom ProgressHandler (Async)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part4_cookbook/progress_subscriber.html#filtering-subscriber">Filtering Subscriber</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part4_cookbook/progress_subscriber.html#usage">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part4_cookbook/progress_subscriber.html#with-progress-handler">With Progress Handler</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part4_cookbook/progress_subscriber.html#key-points">Key Points</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../part4_cookbook/inference_gateway.html">Recipe: Custom Inference Gateway</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../part4_cookbook/inference_gateway.html#goal">Goal</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part4_cookbook/inference_gateway.html#implementation">Implementation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part4_cookbook/inference_gateway.html#with-streaming-support">With Streaming Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part4_cookbook/inference_gateway.html#with-tracing">With Tracing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part4_cookbook/inference_gateway.html#registration">Registration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part4_cookbook/inference_gateway.html#yaml-usage">YAML Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part4_cookbook/inference_gateway.html#key-points">Key Points</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../part4_cookbook/tool_policy.html">Recipe: Tool Policy</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../part4_cookbook/tool_policy.html#goal">Goal</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part4_cookbook/tool_policy.html#hitl-policy">HITL Policy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part4_cookbook/tool_policy.html#policy-engine-integration">Policy Engine Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part4_cookbook/tool_policy.html#using-with-agent">Using with Agent</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part4_cookbook/tool_policy.html#yaml-configuration">YAML Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part4_cookbook/tool_policy.html#key-points">Key Points</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Part 5: Operating the Framework</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../part5_operations/index.html">Part 5: Operating the Framework</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../part5_operations/monitoring.html">Monitoring &amp; Observability</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../part5_operations/monitoring.html#phoenix-integration">Phoenix Integration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part5_operations/monitoring.html#setup">Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part5_operations/monitoring.html#configuration">Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part5_operations/monitoring.html#span-hierarchy">Span Hierarchy</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part5_operations/monitoring.html#attributes-captured">Attributes Captured</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part5_operations/monitoring.html#cost-tracking">Cost Tracking</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part5_operations/monitoring.html#event-stream">Event Stream</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part5_operations/monitoring.html#default-frontend-events">Default Frontend Events</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part5_operations/monitoring.html#filtering">Filtering</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part5_operations/monitoring.html#logging">Logging</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part5_operations/monitoring.html#framework-logger">Framework Logger</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part5_operations/monitoring.html#structured-logging">Structured Logging</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part5_operations/monitoring.html#langfuse-integration">Langfuse Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part5_operations/monitoring.html#health-checks">Health Checks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part5_operations/monitoring.html#metrics">Metrics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part5_operations/monitoring.html#custom-metrics">Custom Metrics</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part5_operations/monitoring.html#dashboard-queries">Dashboard Queries</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part5_operations/monitoring.html#phoenix-queries">Phoenix Queries</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part5_operations/monitoring.html#best-practices">Best Practices</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../part5_operations/security.html">Security &amp; Guardrails</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../part5_operations/security.html#human-in-the-loop-hitl">Human-in-the-Loop (HITL)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part5_operations/security.html#configuration">Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part5_operations/security.html#environment-variables">Environment Variables</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part5_operations/security.html#approval-flow">Approval Flow</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part5_operations/security.html#tool-access-policies">Tool Access Policies</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part5_operations/security.html#role-based-access">Role-Based Access</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part5_operations/security.html#separate-worker-configurations">Separate Worker Configurations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part5_operations/security.html#input-validation">Input Validation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part5_operations/security.html#pydantic-schemas">Pydantic Schemas</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part5_operations/security.html#tool-level-validation">Tool-Level Validation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part5_operations/security.html#rate-limiting">Rate Limiting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part5_operations/security.html#secrets-management">Secrets Management</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part5_operations/security.html#id1">Environment Variables</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part5_operations/security.html#secret-injection">Secret Injection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part5_operations/security.html#never-log-secrets">Never Log Secrets</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part5_operations/security.html#audit-logging">Audit Logging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part5_operations/security.html#environment-variable-reference">Environment Variable Reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part5_operations/security.html#best-practices">Best Practices</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../part5_operations/troubleshooting.html">Troubleshooting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../part5_operations/troubleshooting.html#agent-not-completing">Agent Not Completing</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part5_operations/troubleshooting.html#symptom">Symptom</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part5_operations/troubleshooting.html#causes-solutions">Causes &amp; Solutions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part5_operations/troubleshooting.html#previous-turn-completion-detected">Previous Turn Completion Detected</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part5_operations/troubleshooting.html#id1">Symptom</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part5_operations/troubleshooting.html#solution">Solution</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part5_operations/troubleshooting.html#tool-not-found">Tool Not Found</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part5_operations/troubleshooting.html#id2">Symptom</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part5_operations/troubleshooting.html#id3">Solution</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part5_operations/troubleshooting.html#context-not-available">Context Not Available</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part5_operations/troubleshooting.html#id4">Symptom</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part5_operations/troubleshooting.html#id5">Solution</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part5_operations/troubleshooting.html#llm-timeout">LLM Timeout</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part5_operations/troubleshooting.html#id6">Symptom</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part5_operations/troubleshooting.html#id7">Solution</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part5_operations/troubleshooting.html#memory-not-shared">Memory Not Shared</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part5_operations/troubleshooting.html#id8">Symptom</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part5_operations/troubleshooting.html#id9">Solution</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part5_operations/troubleshooting.html#events-not-received">Events Not Received</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part5_operations/troubleshooting.html#id10">Symptom</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part5_operations/troubleshooting.html#id11">Solution</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part5_operations/troubleshooting.html#policies-not-provided">Policies Not Provided</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part5_operations/troubleshooting.html#id12">Symptom</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part5_operations/troubleshooting.html#id13">Solution</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part5_operations/troubleshooting.html#yaml-variable-not-expanded">YAML Variable Not Expanded</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part5_operations/troubleshooting.html#id14">Symptom</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part5_operations/troubleshooting.html#id15">Solution</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part5_operations/troubleshooting.html#debug-logging">Debug Logging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part5_operations/troubleshooting.html#phoenix-connection-failed">Phoenix Connection Failed</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part5_operations/troubleshooting.html#id16">Symptom</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part5_operations/troubleshooting.html#id17">Solution</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part5_operations/troubleshooting.html#getting-help">Getting Help</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Part 6: Domain Playbooks</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../part6_playbooks/index.html">Part 6 - Domain Playbooks</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../part6_playbooks/overview.html">Domain Playbooks Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../part6_playbooks/overview.html#what-is-a-domain-playbook">What is a Domain Playbook?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part6_playbooks/overview.html#pattern-template">Pattern Template</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part6_playbooks/overview.html#available-playbooks">Available Playbooks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part6_playbooks/overview.html#cross-cutting-concerns">Cross-Cutting Concerns</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part6_playbooks/overview.html#observability">Observability</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part6_playbooks/overview.html#multi-turn-context">Multi-Turn Context</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part6_playbooks/overview.html#access-control">Access Control</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part6_playbooks/overview.html#structured-output">Structured Output</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part6_playbooks/overview.html#building-your-own-playbook">Building Your Own Playbook</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../part6_playbooks/data_analytics.html">Data Analytics Playbook</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../part6_playbooks/data_analytics.html#use-cases">Use Cases</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part6_playbooks/data_analytics.html#agent-hierarchy">Agent Hierarchy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part6_playbooks/data_analytics.html#tool-categories">Tool Categories</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part6_playbooks/data_analytics.html#schema-tools">Schema Tools</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part6_playbooks/data_analytics.html#query-tools">Query Tools</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part6_playbooks/data_analytics.html#metric-tools">Metric Tools</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part6_playbooks/data_analytics.html#connection-tools">Connection Tools</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part6_playbooks/data_analytics.html#policy-patterns">Policy Patterns</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part6_playbooks/data_analytics.html#access-control">Access Control</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part6_playbooks/data_analytics.html#hitl-for-writes">HITL for Writes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part6_playbooks/data_analytics.html#validation-before-write">Validation Before Write</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part6_playbooks/data_analytics.html#context-services">Context Services</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part6_playbooks/data_analytics.html#data-model-service">Data Model Service</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part6_playbooks/data_analytics.html#manifest-export">Manifest Export</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part6_playbooks/data_analytics.html#schema-awareness-in-prompts">Schema Awareness in Prompts</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part6_playbooks/data_analytics.html#reference-implementation">Reference Implementation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../part6_playbooks/document_processing.html">Document Processing Playbook</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../part6_playbooks/document_processing.html#use-cases">Use Cases</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part6_playbooks/document_processing.html#agent-hierarchy">Agent Hierarchy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part6_playbooks/document_processing.html#tool-categories">Tool Categories</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part6_playbooks/document_processing.html#document-input">Document Input</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part6_playbooks/document_processing.html#analysis-tools">Analysis Tools</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part6_playbooks/document_processing.html#extraction-tools">Extraction Tools</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part6_playbooks/document_processing.html#transformation-tools">Transformation Tools</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part6_playbooks/document_processing.html#policy-patterns">Policy Patterns</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part6_playbooks/document_processing.html#confidence-thresholds">Confidence Thresholds</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part6_playbooks/document_processing.html#multi-stage-validation">Multi-Stage Validation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part6_playbooks/document_processing.html#context-services">Context Services</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part6_playbooks/document_processing.html#document-store">Document Store</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part6_playbooks/document_processing.html#template-registry">Template Registry</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part6_playbooks/document_processing.html#structured-output">Structured Output</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part6_playbooks/document_processing.html#implementation-notes">Implementation Notes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../part6_playbooks/code_assistant.html">Code Assistant Playbook</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../part6_playbooks/code_assistant.html#use-cases">Use Cases</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part6_playbooks/code_assistant.html#agent-hierarchy">Agent Hierarchy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part6_playbooks/code_assistant.html#tool-categories">Tool Categories</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part6_playbooks/code_assistant.html#navigation-tools">Navigation Tools</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part6_playbooks/code_assistant.html#analysis-tools">Analysis Tools</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part6_playbooks/code_assistant.html#modification-tools">Modification Tools</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part6_playbooks/code_assistant.html#execution-tools">Execution Tools</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part6_playbooks/code_assistant.html#policy-patterns">Policy Patterns</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part6_playbooks/code_assistant.html#sandbox-execution">Sandbox Execution</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part6_playbooks/code_assistant.html#incremental-changes">Incremental Changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part6_playbooks/code_assistant.html#hitl-for-writes">HITL for Writes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part6_playbooks/code_assistant.html#context-services">Context Services</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part6_playbooks/code_assistant.html#codebase-index">Codebase Index</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part6_playbooks/code_assistant.html#test-results-store">Test Results Store</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part6_playbooks/code_assistant.html#structured-output">Structured Output</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part6_playbooks/code_assistant.html#implementation-notes">Implementation Notes</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Part 7: Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../part7_reference/index.html">Part 7: Reference &amp; Appendices</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../part7_reference/api.html">API Reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../part7_reference/api.html#public-api-summary">Public API Summary</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part7_reference/api.html#core-agents">Core Agents</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part7_reference/api.html#base-classes">Base Classes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part7_reference/api.html#data-classes">Data Classes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part7_reference/api.html#decorators">Decorators</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part7_reference/api.html#memory-implementations">Memory Implementations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part7_reference/api.html#policies">Policies</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part7_reference/api.html#import-example">Import Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../part7_reference/message_format.html">Message Format Specification</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../part7_reference/message_format.html#message-structure">Message Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part7_reference/message_format.html#type-constants">Type Constants</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part7_reference/message_format.html#message-types">Message Types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part7_reference/message_format.html#user-message">user_message</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part7_reference/message_format.html#assistant-message">assistant_message</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part7_reference/message_format.html#task">task</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part7_reference/message_format.html#action">action</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part7_reference/message_format.html#observation">observation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part7_reference/message_format.html#error">error</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part7_reference/message_format.html#final">final</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part7_reference/message_format.html#synthesis">synthesis</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part7_reference/message_format.html#strategic-plan">strategic_plan</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part7_reference/message_format.html#suggested-plan">suggested_plan</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part7_reference/message_format.html#type-collections">Type Collections</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part7_reference/message_format.html#message-builder">Message Builder</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part7_reference/message_format.html#validation">Validation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../part7_reference/env_variables.html">Environment Variables</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../part7_reference/env_variables.html#llm-configuration">LLM Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part7_reference/env_variables.html#openai">OpenAI</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part7_reference/env_variables.html#google-ai">Google AI</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part7_reference/env_variables.html#pricing">Pricing</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part7_reference/env_variables.html#observability">Observability</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part7_reference/env_variables.html#phoenix">Phoenix</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part7_reference/env_variables.html#langfuse">Langfuse</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part7_reference/env_variables.html#logging">Logging</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part7_reference/env_variables.html#agent-behavior">Agent Behavior</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part7_reference/env_variables.html#react-planner">ReAct Planner</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part7_reference/env_variables.html#hitl-human-in-the-loop">HITL (Human-in-the-Loop)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part7_reference/env_variables.html#event-filtering">Event Filtering</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part7_reference/env_variables.html#storage">Storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part7_reference/env_variables.html#usage-examples">Usage Examples</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part7_reference/env_variables.html#development">Development</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part7_reference/env_variables.html#production">Production</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part7_reference/env_variables.html#docker-compose">Docker Compose</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../part7_reference/migration.html">Migration Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../part7_reference/migration.html#v1-to-v2">v1 to v2</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part7_reference/migration.html#breaking-changes">Breaking Changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part7_reference/migration.html#migration-steps">Migration Steps</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part7_reference/migration.html#v2-0-to-v2-1">v2.0 to v2.1</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part7_reference/migration.html#new-features">New Features</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part7_reference/migration.html#migration">Migration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part7_reference/migration.html#v2-1-to-v2-2">v2.1 to v2.2</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part7_reference/migration.html#id1">New Features</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part7_reference/migration.html#id2">Migration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part7_reference/migration.html#v2-x-feature-summary">v2.x Feature Summary</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../part7_reference/migration.html#v2-2-highlights">v2.2 Highlights</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part7_reference/migration.html#v2-0-highlights">v2.0 Highlights</a></li>
<li class="toctree-l4"><a class="reference internal" href="../part7_reference/migration.html#planner-ecosystem">Planner Ecosystem</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../part7_reference/migration.html#checking-your-version">Checking Your Version</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part7_reference/migration.html#getting-help">Getting Help</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../api/index.html#framework-generic-library">Framework (Generic Library)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/index.html#module-agent_framework.base">Core Classes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.base.Action"><code class="docutils literal notranslate"><span class="pre">Action</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.base.BaseEventSubscriber"><code class="docutils literal notranslate"><span class="pre">BaseEventSubscriber</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.base.BaseInferenceGateway"><code class="docutils literal notranslate"><span class="pre">BaseInferenceGateway</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.base.BaseJobStore"><code class="docutils literal notranslate"><span class="pre">BaseJobStore</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.base.BaseMemory"><code class="docutils literal notranslate"><span class="pre">BaseMemory</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.base.BaseMessageStore"><code class="docutils literal notranslate"><span class="pre">BaseMessageStore</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.base.BasePlanner"><code class="docutils literal notranslate"><span class="pre">BasePlanner</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.base.BaseProgressHandler"><code class="docutils literal notranslate"><span class="pre">BaseProgressHandler</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.base.BasePromptManager"><code class="docutils literal notranslate"><span class="pre">BasePromptManager</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.base.BaseTool"><code class="docutils literal notranslate"><span class="pre">BaseTool</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.base.FinalResponse"><code class="docutils literal notranslate"><span class="pre">FinalResponse</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.core.agent.Agent"><code class="docutils literal notranslate"><span class="pre">Agent</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.core.manager_v2.ManagerAgent"><code class="docutils literal notranslate"><span class="pre">ManagerAgent</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.core.events.EventBus"><code class="docutils literal notranslate"><span class="pre">EventBus</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.core.events.LoggingSubscriber"><code class="docutils literal notranslate"><span class="pre">LoggingSubscriber</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/index.html#module-agent_framework.decorators">Decorators</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.decorators.FunctionalTool"><code class="docutils literal notranslate"><span class="pre">FunctionalTool</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.decorators.tool"><code class="docutils literal notranslate"><span class="pre">tool()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/index.html#module-agent_framework.components.planners">Planners</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.components.planners.ChatPlanner"><code class="docutils literal notranslate"><span class="pre">ChatPlanner</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.components.planners.LLMRouterPlanner"><code class="docutils literal notranslate"><span class="pre">LLMRouterPlanner</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.components.planners.ManagerScriptPlanner"><code class="docutils literal notranslate"><span class="pre">ManagerScriptPlanner</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.components.planners.MathPlanner"><code class="docutils literal notranslate"><span class="pre">MathPlanner</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.components.planners.ReActPlanner"><code class="docutils literal notranslate"><span class="pre">ReActPlanner</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.components.planners.SingleActionPlanner"><code class="docutils literal notranslate"><span class="pre">SingleActionPlanner</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.components.planners.StaticPlanner"><code class="docutils literal notranslate"><span class="pre">StaticPlanner</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.components.planners.StrategicDecomposerPlanner"><code class="docutils literal notranslate"><span class="pre">StrategicDecomposerPlanner</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.components.planners.StrategicPlanner"><code class="docutils literal notranslate"><span class="pre">StrategicPlanner</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.components.planners.WorkerRouterPlanner"><code class="docutils literal notranslate"><span class="pre">WorkerRouterPlanner</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/index.html#module-agent_framework.components.memory">Memory</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.components.memory.HierarchicalSharedMemory"><code class="docutils literal notranslate"><span class="pre">HierarchicalSharedMemory</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.components.memory.InMemoryMemory"><code class="docutils literal notranslate"><span class="pre">InMemoryMemory</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.components.memory.SharedInMemoryMemory"><code class="docutils literal notranslate"><span class="pre">SharedInMemoryMemory</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.components.memory.SharedStateStore"><code class="docutils literal notranslate"><span class="pre">SharedStateStore</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/index.html#module-agent_framework.components.message_store_memory">Message Store Memory</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.components.message_store_memory.HierarchicalMessageStoreMemory"><code class="docutils literal notranslate"><span class="pre">HierarchicalMessageStoreMemory</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.components.message_store_memory.MessageStoreMemory"><code class="docutils literal notranslate"><span class="pre">MessageStoreMemory</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/index.html#module-agent_framework.gateways.inference">Gateways</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.gateways.inference.GoogleAIGateway"><code class="docutils literal notranslate"><span class="pre">GoogleAIGateway</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.gateways.inference.MockInferenceGateway"><code class="docutils literal notranslate"><span class="pre">MockInferenceGateway</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.gateways.inference.OpenAIGateway"><code class="docutils literal notranslate"><span class="pre">OpenAIGateway</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/index.html#module-agent_framework.policies.base">Policies</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.policies.base.CheckpointPolicy"><code class="docutils literal notranslate"><span class="pre">CheckpointPolicy</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.policies.base.CompletionDetector"><code class="docutils literal notranslate"><span class="pre">CompletionDetector</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.policies.base.FollowUpPolicy"><code class="docutils literal notranslate"><span class="pre">FollowUpPolicy</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.policies.base.HITLPolicy"><code class="docutils literal notranslate"><span class="pre">HITLPolicy</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.policies.base.HistoryFilter"><code class="docutils literal notranslate"><span class="pre">HistoryFilter</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.policies.base.LoopPreventionPolicy"><code class="docutils literal notranslate"><span class="pre">LoopPreventionPolicy</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.policies.base.TerminationPolicy"><code class="docutils literal notranslate"><span class="pre">TerminationPolicy</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.policies.presets.get_preset"><code class="docutils literal notranslate"><span class="pre">get_preset()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.policies.presets.list_presets"><code class="docutils literal notranslate"><span class="pre">list_presets()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/index.html#module-agent_framework.services.request_context">Services</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.services.request_context.clear_request_context"><code class="docutils literal notranslate"><span class="pre">clear_request_context()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.services.request_context.get_from_context"><code class="docutils literal notranslate"><span class="pre">get_from_context()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.services.request_context.get_request_context"><code class="docutils literal notranslate"><span class="pre">get_request_context()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.services.request_context.set_request_context"><code class="docutils literal notranslate"><span class="pre">set_request_context()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.services.request_context.update_request_context"><code class="docutils literal notranslate"><span class="pre">update_request_context()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.services.context_builder.ContextBuilder"><code class="docutils literal notranslate"><span class="pre">ContextBuilder</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.services.context_builder.register_datamodel_service"><code class="docutils literal notranslate"><span class="pre">register_datamodel_service()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/index.html#module-agent_framework.observability.subscribers">Observability</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.observability.subscribers.LangfuseSubscriber"><code class="docutils literal notranslate"><span class="pre">LangfuseSubscriber</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.observability.subscribers.PhoenixSubscriber"><code class="docutils literal notranslate"><span class="pre">PhoenixSubscriber</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.logging.get_logger"><code class="docutils literal notranslate"><span class="pre">get_logger()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.logging.set_level"><code class="docutils literal notranslate"><span class="pre">set_level()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/index.html#module-agent_framework.progress_filters">Progress Filters</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.progress_filters.normalize_event_names"><code class="docutils literal notranslate"><span class="pre">normalize_event_names()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.progress_filters.resolve_frontend_allowlist"><code class="docutils literal notranslate"><span class="pre">resolve_frontend_allowlist()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/index.html#module-agent_framework.prompt_managers.managers">Prompt Managers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.prompt_managers.managers.StaticPromptManager"><code class="docutils literal notranslate"><span class="pre">StaticPromptManager</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/index.html#flows">Flows</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/index.html#module-agent_framework.utils.manifest_generator">Utilities</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.utils.manifest_generator.generate_manifest"><code class="docutils literal notranslate"><span class="pre">generate_manifest()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.utils.manifest_generator.save_manifest"><code class="docutils literal notranslate"><span class="pre">save_manifest()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#expected-message-format">Expected Message Format</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.utils.message_builder.create_action_entry"><code class="docutils literal notranslate"><span class="pre">create_action_entry()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.utils.message_builder.create_assistant_message"><code class="docutils literal notranslate"><span class="pre">create_assistant_message()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.utils.message_builder.create_delegation_entry"><code class="docutils literal notranslate"><span class="pre">create_delegation_entry()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.utils.message_builder.create_director_context_entry"><code class="docutils literal notranslate"><span class="pre">create_director_context_entry()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.utils.message_builder.create_error_entry"><code class="docutils literal notranslate"><span class="pre">create_error_entry()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.utils.message_builder.create_final_entry"><code class="docutils literal notranslate"><span class="pre">create_final_entry()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.utils.message_builder.create_global_observation_entry"><code class="docutils literal notranslate"><span class="pre">create_global_observation_entry()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.utils.message_builder.create_observation_entry"><code class="docutils literal notranslate"><span class="pre">create_observation_entry()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.utils.message_builder.create_strategic_plan_entry"><code class="docutils literal notranslate"><span class="pre">create_strategic_plan_entry()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.utils.message_builder.create_synthesis_entry"><code class="docutils literal notranslate"><span class="pre">create_synthesis_entry()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.utils.message_builder.create_task_entry"><code class="docutils literal notranslate"><span class="pre">create_task_entry()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.utils.message_builder.create_user_message"><code class="docutils literal notranslate"><span class="pre">create_user_message()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.utils.message_builder.get_message_type_info"><code class="docutils literal notranslate"><span class="pre">get_message_type_info()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/index.html#agent_framework.utils.message_builder.prepare_history_from_job_data"><code class="docutils literal notranslate"><span class="pre">prepare_history_from_job_data()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/index.html#deployment-layer">Deployment Layer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/index.html#bi-tools-domain-example">BI Tools (Domain Example)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/index.html#id1">Services</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/index.html#tools">Tools</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Power BI Implementation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../powerbi_impl/index.html">Power BI Dashboard Editor Implementation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../powerbi_impl/runtime_integration.html">Runtime Integration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../powerbi_impl/runtime_integration.html#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../powerbi_impl/runtime_integration.html#server-architecture">Server Architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="../powerbi_impl/runtime_integration.html#http-endpoint-run">HTTP Endpoint: /run</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/runtime_integration.html#key-points">Key Points</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../powerbi_impl/runtime_integration.html#websocket-endpoint-ws-agent">WebSocket Endpoint: /ws/agent</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/runtime_integration.html#websocketprogresshandler">WebsocketProgressHandler</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../powerbi_impl/runtime_integration.html#resume-endpoints">Resume Endpoints</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/runtime_integration.html#resume-job-stored-pending-action">/resume_job (Stored Pending Action)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/runtime_integration.html#resume-ad-hoc-tool-execution">/resume (Ad-hoc Tool Execution)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../powerbi_impl/runtime_integration.html#data-model-context">Data Model Context</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/runtime_integration.html#how-it-works">How It Works</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../powerbi_impl/runtime_integration.html#phoenix-tracing-integration">Phoenix Tracing Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../powerbi_impl/runtime_integration.html#environment-variables">Environment Variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../powerbi_impl/runtime_integration.html#request-flow-diagram">Request Flow Diagram</a></li>
<li class="toctree-l3"><a class="reference internal" href="../powerbi_impl/runtime_integration.html#best-practices">Best Practices</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../powerbi_impl/agent_stack.html">Agent &amp; Policy Stack</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../powerbi_impl/agent_stack.html#architecture-overview">Architecture Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../powerbi_impl/agent_stack.html#orchestrator">Orchestrator</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/agent_stack.html#configuration-highlights">Configuration Highlights</a></li>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/agent_stack.html#key-features">Key Features</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../powerbi_impl/agent_stack.html#pbi-analysis-manager">PBI Analysis Manager</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/agent_stack.html#id1">Configuration Highlights</a></li>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/agent_stack.html#id2">Key Features</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../powerbi_impl/agent_stack.html#worker-agents">Worker Agents</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/agent_stack.html#model-structure-analyzer">Model Structure Analyzer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/agent_stack.html#dax-analyzer-read-only">DAX Analyzer (Read-Only)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/agent_stack.html#dax-editor-read-write">DAX Editor (Read+Write)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../powerbi_impl/agent_stack.html#tool-access-restriction">Tool Access Restriction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../powerbi_impl/agent_stack.html#policies">Policies</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/agent_stack.html#orchestrator-policies">Orchestrator Policies</a></li>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/agent_stack.html#worker-policies">Worker Policies</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../powerbi_impl/agent_stack.html#memory-configuration">Memory Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../powerbi_impl/agent_stack.html#subscribers">Subscribers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../powerbi_impl/agent_stack.html#summary">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../powerbi_impl/data_services.html">Data &amp; Context Services</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../powerbi_impl/data_services.html#architecture">Architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="../powerbi_impl/data_services.html#datamodelservice">DataModelService</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/data_services.html#purpose">Purpose</a></li>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/data_services.html#context-manager">Context Manager</a></li>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/data_services.html#implementation">Implementation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/data_services.html#usage-in-tools">Usage in Tools</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../powerbi_impl/data_services.html#knowledgegraphclient">KnowledgeGraphClient</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/data_services.html#id1">Purpose</a></li>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/data_services.html#api-methods">API Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/data_services.html#manifest-export">Manifest Export</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../powerbi_impl/data_services.html#kgdatamodelservice">KGDataModelService</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/data_services.html#id2">Purpose</a></li>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/data_services.html#id3">Implementation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../powerbi_impl/data_services.html#service-registration">Service Registration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/data_services.html#retrieving-service">Retrieving Service</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../powerbi_impl/data_services.html#metadata-files">Metadata Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../powerbi_impl/data_services.html#environment-variables">Environment Variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../powerbi_impl/data_services.html#best-practices">Best Practices</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../powerbi_impl/tools_coverage.html">Tool Implementation Coverage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../powerbi_impl/tools_coverage.html#tool-organization">Tool Organization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../powerbi_impl/tools_coverage.html#column-tools">Column Tools</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/tools_coverage.html#example-listcolumnstool">Example: ListColumnsTool</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../powerbi_impl/tools_coverage.html#measure-tools">Measure Tools</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/tools_coverage.html#example-getmeasureexpressiontool">Example: GetMeasureExpressionTool</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../powerbi_impl/tools_coverage.html#relationship-tools">Relationship Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../powerbi_impl/tools_coverage.html#table-tools">Table Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../powerbi_impl/tools_coverage.html#sql-tools">SQL Tools</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/tools_coverage.html#example-sqlanalyzertool">Example: SQLAnalyzerTool</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../powerbi_impl/tools_coverage.html#m-query-tools">M Query Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../powerbi_impl/tools_coverage.html#partition-tools">Partition Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../powerbi_impl/tools_coverage.html#metadata-tools">Metadata Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../powerbi_impl/tools_coverage.html#model-tools">Model Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../powerbi_impl/tools_coverage.html#utility-tools">Utility Tools</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/tools_coverage.html#pythoninterpretertool">PythonInterpreterTool</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../powerbi_impl/tools_coverage.html#yaml-registration">YAML Registration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../powerbi_impl/tools_coverage.html#worker-tool-assignments">Worker Tool Assignments</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/tools_coverage.html#model-structure-analyzer-read-only">Model Structure Analyzer (Read-Only)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/tools_coverage.html#dax-analyzer-read-only">DAX Analyzer (Read-Only)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/tools_coverage.html#dax-editor-read-write">DAX Editor (Read+Write)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../powerbi_impl/tools_coverage.html#best-practices">Best Practices</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../powerbi_impl/observability_approvals.html">Observability &amp; Approvals</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../powerbi_impl/observability_approvals.html#phoenix-integration">Phoenix Integration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/observability_approvals.html#subscriber-configuration">Subscriber Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/observability_approvals.html#span-hierarchy">Span Hierarchy</a></li>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/observability_approvals.html#captured-attributes">Captured Attributes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/observability_approvals.html#environment-variables">Environment Variables</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../powerbi_impl/observability_approvals.html#websocket-event-streaming">WebSocket Event Streaming</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/observability_approvals.html#default-allowed-events">Default Allowed Events</a></li>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/observability_approvals.html#event-filtering">Event Filtering</a></li>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/observability_approvals.html#websocket-message-format">WebSocket Message Format</a></li>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/observability_approvals.html#final-response-format">Final Response Format</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../powerbi_impl/observability_approvals.html#human-in-the-loop-hitl">Human-in-the-Loop (HITL)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/observability_approvals.html#configuration">Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/observability_approvals.html#approval-flow">Approval Flow</a></li>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/observability_approvals.html#filejobstore">FileJobStore</a></li>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/observability_approvals.html#pending-action-structure">Pending Action Structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/observability_approvals.html#resume-endpoints">Resume Endpoints</a></li>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/observability_approvals.html#approvals-in-request">Approvals in Request</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../powerbi_impl/observability_approvals.html#logging">Logging</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/observability_approvals.html#id1">Subscriber Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/observability_approvals.html#log-output">Log Output</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../powerbi_impl/observability_approvals.html#debugging">Debugging</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/observability_approvals.html#debug-endpoints">Debug Endpoints</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../powerbi_impl/observability_approvals.html#summary">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../powerbi_impl/implementation_status.html">Implementation Status &amp; Gaps</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../powerbi_impl/implementation_status.html#status-summary">Status Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../powerbi_impl/implementation_status.html#core-agents-policies">1. Core Agents &amp; Policies ✅</a></li>
<li class="toctree-l3"><a class="reference internal" href="../powerbi_impl/implementation_status.html#data-access-layer">2. Data Access Layer ✅</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/implementation_status.html#implementation">Implementation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/implementation_status.html#note">Note</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../powerbi_impl/implementation_status.html#tool-coverage">3. Tool Coverage ✅</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/implementation_status.html#what-s-implemented">What’s Implemented</a></li>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/implementation_status.html#updated-tools">Updated Tools</a></li>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/implementation_status.html#response-format">Response Format</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../powerbi_impl/implementation_status.html#context-memory">4. Context &amp; Memory ✅</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/implementation_status.html#conversation-recording">Conversation Recording</a></li>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/implementation_status.html#memory-configuration">Memory Configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../powerbi_impl/implementation_status.html#observability-hitl">5. Observability &amp; HITL ✅</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/implementation_status.html#phoenix-tracing">Phoenix Tracing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/implementation_status.html#websocket-streaming">WebSocket Streaming</a></li>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/implementation_status.html#hitl-approval-flow">HITL Approval Flow</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../powerbi_impl/implementation_status.html#flow-orchestration">6. Flow Orchestration ❌</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/implementation_status.html#current-state">Current State</a></li>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/implementation_status.html#what-flowfactory-provides">What FlowFactory Provides</a></li>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/implementation_status.html#recommendations">Recommendations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../powerbi_impl/implementation_status.html#completed-actions">Completed Actions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/implementation_status.html#done">✅ Done</a></li>
<li class="toctree-l4"><a class="reference internal" href="../powerbi_impl/implementation_status.html#future-enhancements-optional">Future Enhancements (Optional)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../powerbi_impl/implementation_status.html#migration-checklist-completed">Migration Checklist (Completed)</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/01_new_agent.html">Create a New Agent (10 minutes)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/01_new_agent.html#outcome">Outcome</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/01_new_agent.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/01_new_agent.html#step-1-create-yaml">Step 1 — Create YAML</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/01_new_agent.html#step-2-run-the-agent">Step 2 — Run the Agent</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/01_new_agent.html#step-3-generate-manifest-and-open-docs">Step 3 — Generate Manifest and Open Docs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/01_new_agent.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/02_add_tool.html">Add a Custom Tool (8 minutes)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/02_add_tool.html#goal">Goal</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/02_add_tool.html#step-1-implement-the-tool">Step 1 — Implement the Tool</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/02_add_tool.html#step-2-register-the-tool">Step 2 — Register the Tool</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/02_add_tool.html#step-3-reference-in-yaml">Step 3 — Reference in YAML</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/02_add_tool.html#step-4-run">Step 4 — Run</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/02_add_tool.html#next">Next</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/03_llm_routing.html">Add Natural Language Routing (7 minutes)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/03_llm_routing.html#goal">Goal</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/03_llm_routing.html#step-1-switch-planner">Step 1 — Switch Planner</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/03_llm_routing.html#step-2-try-it">Step 2 — Try It</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/03_llm_routing.html#notes">Notes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/04_deploy.html">Deploy the Agent API (5 minutes)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/04_deploy.html#fastapi-server">FastAPI Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/04_deploy.html#run">Run</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/04_deploy.html#test">Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/04_deploy.html#next">Next</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Legacy Guides</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Legacy Guides</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#content-mapping">Content Mapping</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#additional-topics">Additional Topics</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Hierarchical History Filtering</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#problem-statement">Problem Statement</a></li>
<li class="toctree-l4"><a class="reference internal" href="#solution-role-based-filtering">Solution: Role-Based Filtering</a></li>
<li class="toctree-l4"><a class="reference internal" href="#historyfilter-interface">HistoryFilter Interface</a></li>
<li class="toctree-l4"><a class="reference internal" href="#integration-with-planners">Integration with Planners</a></li>
<li class="toctree-l4"><a class="reference internal" href="#custom-filter-configuration">Custom Filter Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#turn-boundary-scoping">Turn Boundary Scoping</a></li>
<li class="toctree-l4"><a class="reference internal" href="#message-type-constants">Message Type Constants</a></li>
<li class="toctree-l4"><a class="reference internal" href="#benefits">Benefits</a></li>
<li class="toctree-l4"><a class="reference internal" href="#completion-detection-integration">Completion Detection Integration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#architecture-flow">Architecture Flow</a></li>
<li class="toctree-l4"><a class="reference internal" href="#backward-compatibility">Backward Compatibility</a></li>
<li class="toctree-l4"><a class="reference internal" href="#creating-custom-filters">Creating Custom Filters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#planner-filter-usage">Planner Filter Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="#summary">Summary</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="architecture_workflow.html">Framework Architecture &amp; Workflow</a><ul>
<li class="toctree-l4"><a class="reference internal" href="architecture_workflow.html#high-level-architecture">High-Level Architecture</a></li>
<li class="toctree-l4"><a class="reference internal" href="architecture_workflow.html#core-components">Core Components</a></li>
<li class="toctree-l4"><a class="reference internal" href="architecture_workflow.html#request-lifecycle">Request Lifecycle</a></li>
<li class="toctree-l4"><a class="reference internal" href="architecture_workflow.html#memory-context-visibility">Memory &amp; Context Visibility</a></li>
<li class="toctree-l4"><a class="reference internal" href="architecture_workflow.html#parallel-execution">Parallel Execution</a></li>
<li class="toctree-l4"><a class="reference internal" href="architecture_workflow.html#synthesis">Synthesis</a></li>
<li class="toctree-l4"><a class="reference internal" href="architecture_workflow.html#stagnation-detection">Stagnation Detection</a></li>
<li class="toctree-l4"><a class="reference internal" href="architecture_workflow.html#error-handling">Error Handling</a></li>
<li class="toctree-l4"><a class="reference internal" href="architecture_workflow.html#request-context-async-safe">Request Context (Async-Safe)</a></li>
<li class="toctree-l4"><a class="reference internal" href="architecture_workflow.html#event-system">Event System</a></li>
<li class="toctree-l4"><a class="reference internal" href="architecture_workflow.html#key-design-principles">Key Design Principles</a></li>
<li class="toctree-l4"><a class="reference internal" href="architecture_workflow.html#configuration">Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="architecture_workflow.html#environment-variables">Environment Variables</a></li>
<li class="toctree-l4"><a class="reference internal" href="architecture_workflow.html#summary">Summary</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="phoenix_tracing.html">Phoenix Tracing (Arize)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="phoenix_tracing.html#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="phoenix_tracing.html#key-files">Key Files</a></li>
<li class="toctree-l4"><a class="reference internal" href="phoenix_tracing.html#what-gets-traced">What Gets Traced</a></li>
<li class="toctree-l4"><a class="reference internal" href="phoenix_tracing.html#provider-initialization">Provider Initialization</a></li>
<li class="toctree-l4"><a class="reference internal" href="phoenix_tracing.html#span-hierarchy">Span Hierarchy</a></li>
<li class="toctree-l4"><a class="reference internal" href="phoenix_tracing.html#attributes-metrics">Attributes &amp; Metrics</a></li>
<li class="toctree-l4"><a class="reference internal" href="phoenix_tracing.html#configuration">Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="phoenix_tracing.html#example-yaml-wiring">Example YAML Wiring</a></li>
<li class="toctree-l4"><a class="reference internal" href="phoenix_tracing.html#complete-data-structure-reference">Complete Data Structure Reference</a></li>
<li class="toctree-l4"><a class="reference internal" href="phoenix_tracing.html#replication-notes">Replication Notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="phoenix_tracing.html#implementation-notes">Implementation Notes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="event_system.html">Event System</a><ul>
<li class="toctree-l4"><a class="reference internal" href="event_system.html#eventbus">EventBus</a></li>
<li class="toctree-l4"><a class="reference internal" href="event_system.html#event-types">Event Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="event_system.html#event-payload-structure">Event Payload Structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="event_system.html#event-subscribers">Event Subscribers</a></li>
<li class="toctree-l4"><a class="reference internal" href="event_system.html#progress-handlers">Progress Handlers</a></li>
<li class="toctree-l4"><a class="reference internal" href="event_system.html#event-flow-example">Event Flow Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="event_system.html#event-filtering">Event Filtering</a></li>
<li class="toctree-l4"><a class="reference internal" href="event_system.html#observability-integration">Observability Integration</a></li>
<li class="toctree-l4"><a class="reference internal" href="event_system.html#best-practices">Best Practices</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="async_safety.html">Async Safety with Context Variables</a><ul>
<li class="toctree-l4"><a class="reference internal" href="async_safety.html#why-context-variables">Why Context Variables?</a></li>
<li class="toctree-l4"><a class="reference internal" href="async_safety.html#framework-implementation">Framework Implementation</a></li>
<li class="toctree-l4"><a class="reference internal" href="async_safety.html#context-propagation">Context Propagation</a></li>
<li class="toctree-l4"><a class="reference internal" href="async_safety.html#best-practices">Best Practices</a></li>
<li class="toctree-l4"><a class="reference internal" href="async_safety.html#yaml-variable-expansion">YAML Variable Expansion</a></li>
<li class="toctree-l4"><a class="reference internal" href="async_safety.html#concurrent-request-isolation">Concurrent Request Isolation</a></li>
<li class="toctree-l4"><a class="reference internal" href="async_safety.html#common-pitfalls">Common Pitfalls</a></li>
<li class="toctree-l4"><a class="reference internal" href="async_safety.html#async-safe-memory-system">Async-Safe Memory System</a></li>
<li class="toctree-l4"><a class="reference internal" href="async_safety.html#summary">Summary</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="strategic_planning_architecture.html">Strategic Planning Architecture</a><ul>
<li class="toctree-l4"><a class="reference internal" href="strategic_planning_architecture.html#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="strategic_planning_architecture.html#the-problem-with-simple-routing">The Problem with Simple Routing</a></li>
<li class="toctree-l4"><a class="reference internal" href="strategic_planning_architecture.html#strategic-planning-solution">Strategic Planning Solution</a></li>
<li class="toctree-l4"><a class="reference internal" href="strategic_planning_architecture.html#framework-components">Framework Components</a></li>
<li class="toctree-l4"><a class="reference internal" href="strategic_planning_architecture.html#usage-pattern">Usage Pattern</a></li>
<li class="toctree-l4"><a class="reference internal" href="strategic_planning_architecture.html#plan-format">Plan Format</a></li>
<li class="toctree-l4"><a class="reference internal" href="strategic_planning_architecture.html#comparison-with-simple-routing">Comparison with Simple Routing</a></li>
<li class="toctree-l4"><a class="reference internal" href="strategic_planning_architecture.html#benefits">Benefits</a></li>
<li class="toctree-l4"><a class="reference internal" href="strategic_planning_architecture.html#when-to-use">When to Use</a></li>
<li class="toctree-l4"><a class="reference internal" href="strategic_planning_architecture.html#configuration-example">Configuration Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="strategic_planning_architecture.html#summary">Summary</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="model_optimization_strategy.html">Model Optimization Strategy</a><ul>
<li class="toctree-l4"><a class="reference internal" href="model_optimization_strategy.html#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="model_optimization_strategy.html#architecture">Architecture</a></li>
<li class="toctree-l4"><a class="reference internal" href="model_optimization_strategy.html#why-this-works">Why This Works</a></li>
<li class="toctree-l4"><a class="reference internal" href="model_optimization_strategy.html#configuration">Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="model_optimization_strategy.html#cost-performance-analysis">Cost-Performance Analysis</a></li>
<li class="toctree-l4"><a class="reference internal" href="model_optimization_strategy.html#when-to-use-different-models">When to Use Different Models</a></li>
<li class="toctree-l4"><a class="reference internal" href="model_optimization_strategy.html#monitoring-and-optimization">Monitoring and Optimization</a></li>
<li class="toctree-l4"><a class="reference internal" href="model_optimization_strategy.html#advanced-configurations">Advanced Configurations</a></li>
<li class="toctree-l4"><a class="reference internal" href="model_optimization_strategy.html#troubleshooting">Troubleshooting</a></li>
<li class="toctree-l4"><a class="reference internal" href="model_optimization_strategy.html#summary">Summary</a></li>
<li class="toctree-l4"><a class="reference internal" href="model_optimization_strategy.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="tool_choice_mechanism.html">Tool Choice Mechanism: How Agents Select Tools</a><ul>
<li class="toctree-l4"><a class="reference internal" href="tool_choice_mechanism.html#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="tool_choice_mechanism.html#architecture-flow">Architecture Flow</a></li>
<li class="toctree-l4"><a class="reference internal" href="tool_choice_mechanism.html#step-by-step-process">Step-by-Step Process</a></li>
<li class="toctree-l4"><a class="reference internal" href="tool_choice_mechanism.html#factors-influencing-tool-choice">Factors Influencing Tool Choice</a></li>
<li class="toctree-l4"><a class="reference internal" href="tool_choice_mechanism.html#example-complete-tool-selection-flow">Example: Complete Tool Selection Flow</a></li>
<li class="toctree-l4"><a class="reference internal" href="tool_choice_mechanism.html#parallel-tool-selection">Parallel Tool Selection</a></li>
<li class="toctree-l4"><a class="reference internal" href="tool_choice_mechanism.html#configuration-options">Configuration Options</a></li>
<li class="toctree-l4"><a class="reference internal" href="tool_choice_mechanism.html#key-takeaways">Key Takeaways</a></li>
<li class="toctree-l4"><a class="reference internal" href="tool_choice_mechanism.html#framework-components">Framework Components</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="structured_final_response.html">Structured Final Response Pattern</a><ul>
<li class="toctree-l4"><a class="reference internal" href="structured_final_response.html#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="structured_final_response.html#the-problem">The Problem</a></li>
<li class="toctree-l4"><a class="reference internal" href="structured_final_response.html#the-solution">The Solution</a></li>
<li class="toctree-l4"><a class="reference internal" href="structured_final_response.html#framework-type-definition">Framework Type Definition</a></li>
<li class="toctree-l4"><a class="reference internal" href="structured_final_response.html#how-agents-return-finalresponse">How Agents Return FinalResponse</a></li>
<li class="toctree-l4"><a class="reference internal" href="structured_final_response.html#event-publishing">Event Publishing</a></li>
<li class="toctree-l4"><a class="reference internal" href="structured_final_response.html#common-operation-types">Common Operation Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="structured_final_response.html#integration-with-application">Integration with Application</a></li>
<li class="toctree-l4"><a class="reference internal" href="structured_final_response.html#prompt-engineering">Prompt Engineering</a></li>
<li class="toctree-l4"><a class="reference internal" href="structured_final_response.html#backward-compatibility">Backward Compatibility</a></li>
<li class="toctree-l4"><a class="reference internal" href="structured_final_response.html#benefits">Benefits</a></li>
<li class="toctree-l4"><a class="reference internal" href="structured_final_response.html#summary">Summary</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="orchestrator_vs_manager.html">Orchestrator vs Manager: Key Differences</a><ul>
<li class="toctree-l4"><a class="reference internal" href="orchestrator_vs_manager.html#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="orchestrator_vs_manager.html#hierarchy">Hierarchy</a></li>
<li class="toctree-l4"><a class="reference internal" href="orchestrator_vs_manager.html#orchestrator-strategic-coordinator">Orchestrator - Strategic Coordinator</a></li>
<li class="toctree-l4"><a class="reference internal" href="orchestrator_vs_manager.html#manager-tactical-executor">Manager - Tactical Executor</a></li>
<li class="toctree-l4"><a class="reference internal" href="orchestrator_vs_manager.html#key-behavioral-differences">Key Behavioral Differences</a></li>
<li class="toctree-l4"><a class="reference internal" href="orchestrator_vs_manager.html#execution-flow-example">Execution Flow Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="orchestrator_vs_manager.html#code-level-differences">Code-Level Differences</a></li>
<li class="toctree-l4"><a class="reference internal" href="orchestrator_vs_manager.html#synthesis">Synthesis</a></li>
<li class="toctree-l4"><a class="reference internal" href="orchestrator_vs_manager.html#summary">Summary</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="message_store_integration.html">Message Store Integration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="message_store_integration.html#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="message_store_integration.html#architecture">Architecture</a></li>
<li class="toctree-l4"><a class="reference internal" href="message_store_integration.html#step-1-import-required-framework-classes">Step 1: Import Required Framework Classes</a></li>
<li class="toctree-l4"><a class="reference internal" href="message_store_integration.html#step-2-implement-basemessagestore">Step 2: Implement BaseMessageStore</a></li>
<li class="toctree-l4"><a class="reference internal" href="message_store_integration.html#step-3-discover-available-message-types">Step 3: Discover Available Message Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="message_store_integration.html#step-4-prepare-messages-using-message-builders">Step 4: Prepare Messages Using Message Builders</a></li>
<li class="toctree-l4"><a class="reference internal" href="message_store_integration.html#step-5-pass-store-to-framework">Step 5: Pass Store to Framework</a></li>
<li class="toctree-l4"><a class="reference internal" href="message_store_integration.html#complete-flow-example">Complete Flow Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="message_store_integration.html#hierarchical-memory-for-managers">Hierarchical Memory for Managers</a></li>
<li class="toctree-l4"><a class="reference internal" href="message_store_integration.html#framework-responsibilities">Framework Responsibilities</a></li>
<li class="toctree-l4"><a class="reference internal" href="message_store_integration.html#key-points">Key Points</a></li>
<li class="toctree-l4"><a class="reference internal" href="message_store_integration.html#verification-checklist">Verification Checklist</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="message_store_format.html">Message Store Format Specification</a><ul>
<li class="toctree-l4"><a class="reference internal" href="message_store_format.html#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="message_store_format.html#location-reference">Location Reference</a></li>
<li class="toctree-l4"><a class="reference internal" href="message_store_format.html#expected-message-format">Expected Message Format</a></li>
<li class="toctree-l4"><a class="reference internal" href="message_store_format.html#message-types">Message Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="message_store_format.html#store-organization">Store Organization</a></li>
<li class="toctree-l4"><a class="reference internal" href="message_store_format.html#implementation-example">Implementation Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="message_store_format.html#message-type-constants">Message Type Constants</a></li>
<li class="toctree-l4"><a class="reference internal" href="message_store_format.html#message-builder-utilities">Message Builder Utilities</a></li>
<li class="toctree-l4"><a class="reference internal" href="message_store_format.html#implementation-checklist">Implementation Checklist</a></li>
<li class="toctree-l4"><a class="reference internal" href="message_store_format.html#important-notes">Important Notes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="message_store_implementation.html">Message Store Implementation Guide</a><ul>
<li class="toctree-l4"><a class="reference internal" href="message_store_implementation.html#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="message_store_implementation.html#architecture">Architecture</a></li>
<li class="toctree-l4"><a class="reference internal" href="message_store_implementation.html#step-1-import-required-framework-classes">Step 1: Import Required Framework Classes</a></li>
<li class="toctree-l4"><a class="reference internal" href="message_store_implementation.html#step-2-implement-basemessagestore">Step 2: Implement BaseMessageStore</a></li>
<li class="toctree-l4"><a class="reference internal" href="message_store_implementation.html#step-3-how-messagestorememory-reads-from-your-store">Step 3: How MessageStoreMemory Reads from Your Store</a></li>
<li class="toctree-l4"><a class="reference internal" href="message_store_implementation.html#step-4-use-messagestorememory-with-agents">Step 4: Use MessageStoreMemory with Agents</a></li>
<li class="toctree-l4"><a class="reference internal" href="message_store_implementation.html#step-5-writing-messages-to-your-store">Step 5: Writing Messages to Your Store</a></li>
<li class="toctree-l4"><a class="reference internal" href="message_store_implementation.html#complete-example-api-endpoint-integration">Complete Example: API Endpoint Integration</a></li>
<li class="toctree-l4"><a class="reference internal" href="message_store_implementation.html#hierarchical-memory-for-managers">Hierarchical Memory for Managers</a></li>
<li class="toctree-l4"><a class="reference internal" href="message_store_implementation.html#runtime-messages">Runtime Messages</a></li>
<li class="toctree-l4"><a class="reference internal" href="message_store_implementation.html#key-points">Key Points</a></li>
<li class="toctree-l4"><a class="reference internal" href="message_store_implementation.html#implementation-checklist">Implementation Checklist</a></li>
<li class="toctree-l4"><a class="reference internal" href="message_store_implementation.html#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="utility_tools.html">Framework Utility Tools</a><ul>
<li class="toctree-l4"><a class="reference internal" href="utility_tools.html#available-utility-tools">Available Utility Tools</a></li>
<li class="toctree-l4"><a class="reference internal" href="utility_tools.html#adding-utility-tools-to-agents">Adding Utility Tools to Agents</a></li>
<li class="toctree-l4"><a class="reference internal" href="utility_tools.html#complete-example">Complete Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="utility_tools.html#when-to-use-these-tools">When to Use These Tools</a></li>
<li class="toctree-l4"><a class="reference internal" href="utility_tools.html#integration-with-other-tools">Integration with Other Tools</a></li>
<li class="toctree-l4"><a class="reference internal" href="utility_tools.html#framework-location">Framework Location</a></li>
<li class="toctree-l4"><a class="reference internal" href="utility_tools.html#other-utility-tools">Other Utility Tools</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="environment_variables.html">Environment Variables</a><ul>
<li class="toctree-l4"><a class="reference internal" href="environment_variables.html#llm-providers">LLM Providers</a></li>
<li class="toctree-l4"><a class="reference internal" href="environment_variables.html#pricing-optional">Pricing (Optional)</a></li>
<li class="toctree-l4"><a class="reference internal" href="environment_variables.html#logging-observability">Logging &amp; Observability</a></li>
<li class="toctree-l4"><a class="reference internal" href="environment_variables.html#react-prompt-controls">ReAct Prompt Controls</a></li>
<li class="toctree-l4"><a class="reference internal" href="environment_variables.html#router-prompt-controls">Router Prompt Controls</a></li>
<li class="toctree-l4"><a class="reference internal" href="environment_variables.html#context-configuration">Context Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="environment_variables.html#hitl-human-in-the-loop">HITL – Human-in-the-Loop</a></li>
<li class="toctree-l4"><a class="reference internal" href="environment_variables.html#quick-recipes">Quick Recipes</a></li>
<li class="toctree-l4"><a class="reference internal" href="environment_variables.html#defaults-summary">Defaults Summary</a></li>
<li class="toctree-l4"><a class="reference internal" href="environment_variables.html#framework-vs-implementation-variables">Framework vs Implementation Variables</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">AI Agent Framework</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Legacy Guides</a></li>
      <li class="breadcrumb-item active">Hierarchical History Filtering</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/guides/hierarchical_filtering.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="hierarchical-history-filtering">
<h1>Hierarchical History Filtering<a class="headerlink" href="#hierarchical-history-filtering" title="Link to this heading"></a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>Hierarchical history filtering ensures each agent role (orchestrator, manager, worker) receives appropriate history context for prompt building, preventing token waste and confusion from irrelevant context. This system filters conversation history based on the agent’s role and current context.</p>
</section>
<section id="problem-statement">
<h2>Problem Statement<a class="headerlink" href="#problem-statement" title="Link to this heading"></a></h2>
<p>Without hierarchical filtering, all planners receive the entire history, causing:</p>
<ol class="arabic simple">
<li><p><strong>Token Waste</strong>: Unnecessary context included in prompts</p></li>
<li><p><strong>Context Confusion</strong>: Irrelevant history pollutes decision-making</p></li>
<li><p><strong>Completion Signal Pollution</strong>: Previous turn’s completion signals confuse new turns</p></li>
<li><p><strong>No Role Separation</strong>: Orchestrators see raw execution traces; workers see all conversation history</p></li>
</ol>
</section>
<section id="solution-role-based-filtering">
<h2>Solution: Role-Based Filtering<a class="headerlink" href="#solution-role-based-filtering" title="Link to this heading"></a></h2>
<p>The framework provides <code class="docutils literal notranslate"><span class="pre">HistoryFilter</span></code> implementations that filter history based on agent role:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>┌─────────────────────────────────────────────────────────────┐
│  ORCHESTRATOR                                                │
│  Filter: OrchestratorHistoryFilter                          │
│  Sees: Conversation summary (last 8 turns)                  │
│  Excludes: Raw execution traces, tool results, completion   │
│           signals from previous turns                       │
└─────────────────────────────────────────────────────────────┘
                    │
                    ▼
┌─────────────────────────────────────────────────────────────┐
│  MANAGER                                                     │
│  Filter: ManagerHistoryFilter                               │
│  Sees: Previous phase synthesis summaries only              │
│  Excludes: Full conversation history, raw execution traces, │
│           completion signals from other phases              │
└─────────────────────────────────────────────────────────────┘
                    │
                    ▼
┌─────────────────────────────────────────────────────────────┐
│  WORKER                                                      │
│  Filter: WorkerHistoryFilter                                │
│  Sees: Current turn execution traces only                   │
│  Excludes: Previous turn&#39;s history, completion signals from │
│           previous turns, other workers&#39; traces             │
└─────────────────────────────────────────────────────────────┘
</pre></div>
</div>
</section>
<section id="historyfilter-interface">
<h2>HistoryFilter Interface<a class="headerlink" href="#historyfilter-interface" title="Link to this heading"></a></h2>
<p>The framework provides a <code class="docutils literal notranslate"><span class="pre">HistoryFilter</span></code> abstract base class:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">agent_framework.policies.base</span><span class="w"> </span><span class="kn">import</span> <span class="n">HistoryFilter</span>

<span class="k">class</span><span class="w"> </span><span class="nc">HistoryFilter</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Filters history for role-specific prompt building.&quot;&quot;&quot;</span>
    
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">filter_for_prompt</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">history</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]],</span>
        <span class="n">context</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Filter history for prompt building.&quot;&quot;&quot;</span>
        <span class="k">pass</span>
</pre></div>
</div>
<section id="built-in-filter-implementations">
<h3>Built-in Filter Implementations<a class="headerlink" href="#built-in-filter-implementations" title="Link to this heading"></a></h3>
<section id="orchestratorhistoryfilter">
<h4>OrchestratorHistoryFilter<a class="headerlink" href="#orchestratorhistoryfilter" title="Link to this heading"></a></h4>
<p><strong>Purpose</strong>: High-level conversation summary for orchestrator strategic planning.</p>
<p><strong>What it includes:</strong></p>
<ul class="simple">
<li><p>Conversation turns (<code class="docutils literal notranslate"><span class="pre">user_message</span></code>, <code class="docutils literal notranslate"><span class="pre">assistant_message</span></code>) only</p></li>
<li><p>Limited to last N turns (default: 8, configurable)</p></li>
</ul>
<p><strong>What it excludes:</strong></p>
<ul class="simple">
<li><p>Raw execution traces (<code class="docutils literal notranslate"><span class="pre">action</span></code>, <code class="docutils literal notranslate"><span class="pre">observation</span></code>)</p></li>
<li><p>Detailed tool results</p></li>
<li><p>Previous turn completion signals</p></li>
<li><p>Phase-specific details</p></li>
</ul>
<p><strong>Usage:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">agent_framework.policies.history_filters</span><span class="w"> </span><span class="kn">import</span> <span class="n">OrchestratorHistoryFilter</span>

<span class="nb">filter</span> <span class="o">=</span> <span class="n">OrchestratorHistoryFilter</span><span class="p">(</span><span class="n">max_conversation_turns</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">filtered</span> <span class="o">=</span> <span class="nb">filter</span><span class="o">.</span><span class="n">filter_for_prompt</span><span class="p">(</span>
    <span class="n">history</span><span class="p">,</span>
    <span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;orchestrator&quot;</span><span class="p">,</span> <span class="s2">&quot;max_conversation_turns&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="managerhistoryfilter">
<h4>ManagerHistoryFilter<a class="headerlink" href="#managerhistoryfilter" title="Link to this heading"></a></h4>
<p><strong>Purpose</strong>: Phase-relevant context for manager planning.</p>
<p><strong>What it includes:</strong></p>
<ul class="simple">
<li><p>Previous phase synthesis summaries (if sequential phases)</p></li>
<li><p>Only entries relevant to current phase context (filtered by <code class="docutils literal notranslate"><span class="pre">phase_id</span></code>)</p></li>
</ul>
<p><strong>What it excludes:</strong></p>
<ul class="simple">
<li><p>Full conversation history (orchestrator handles that)</p></li>
<li><p>Raw execution traces from workers</p></li>
<li><p>Completion signals from other phases</p></li>
</ul>
<p><strong>Usage:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">agent_framework.policies.history_filters</span><span class="w"> </span><span class="kn">import</span> <span class="n">ManagerHistoryFilter</span>

<span class="nb">filter</span> <span class="o">=</span> <span class="n">ManagerHistoryFilter</span><span class="p">()</span>
<span class="n">filtered</span> <span class="o">=</span> <span class="nb">filter</span><span class="o">.</span><span class="n">filter_for_prompt</span><span class="p">(</span>
    <span class="n">history</span><span class="p">,</span>
    <span class="p">{</span><span class="s2">&quot;phase_id&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;previous_phase_id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="workerhistoryfilter">
<h4>WorkerHistoryFilter<a class="headerlink" href="#workerhistoryfilter" title="Link to this heading"></a></h4>
<p><strong>Purpose</strong>: Current turn execution traces for worker agents.</p>
<p><strong>What it includes:</strong></p>
<ul class="simple">
<li><p>Current turn execution traces only (after last <code class="docutils literal notranslate"><span class="pre">task</span></code> marker)</p></li>
<li><p>Execution trace types (<code class="docutils literal notranslate"><span class="pre">action</span></code>, <code class="docutils literal notranslate"><span class="pre">observation</span></code>, <code class="docutils literal notranslate"><span class="pre">global_observation</span></code>)</p></li>
<li><p>Tool results from current execution</p></li>
</ul>
<p><strong>What it excludes:</strong></p>
<ul class="simple">
<li><p>Previous turn’s history</p></li>
<li><p>Completion signals from previous turns</p></li>
<li><p>Other workers’ execution traces (unless global)</p></li>
</ul>
<p><strong>Usage:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">agent_framework.policies.history_filters</span><span class="w"> </span><span class="kn">import</span> <span class="n">WorkerHistoryFilter</span>

<span class="nb">filter</span> <span class="o">=</span> <span class="n">WorkerHistoryFilter</span><span class="p">()</span>
<span class="n">filtered</span> <span class="o">=</span> <span class="nb">filter</span><span class="o">.</span><span class="n">filter_for_prompt</span><span class="p">(</span>
    <span class="n">history</span><span class="p">,</span>
    <span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;worker&quot;</span><span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="defaulthistoryfilter">
<h4>DefaultHistoryFilter<a class="headerlink" href="#defaulthistoryfilter" title="Link to this heading"></a></h4>
<p><strong>Purpose</strong>: Backward compatibility - returns all history unchanged.</p>
<p><strong>Usage:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">agent_framework.policies.history_filters</span><span class="w"> </span><span class="kn">import</span> <span class="n">DefaultHistoryFilter</span>

<span class="nb">filter</span> <span class="o">=</span> <span class="n">DefaultHistoryFilter</span><span class="p">()</span>
<span class="n">filtered</span> <span class="o">=</span> <span class="nb">filter</span><span class="o">.</span><span class="n">filter_for_prompt</span><span class="p">(</span><span class="n">history</span><span class="p">,</span> <span class="p">{})</span>
<span class="c1"># Returns: all history (no filtering)</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="integration-with-planners">
<h2>Integration with Planners<a class="headerlink" href="#integration-with-planners" title="Link to this heading"></a></h2>
<p>Filters are automatically applied by planners with sensible defaults:</p>
<section id="strategicplanner-orchestrator">
<h3>StrategicPlanner (Orchestrator)<a class="headerlink" href="#strategicplanner-orchestrator" title="Link to this heading"></a></h3>
<p>Uses <code class="docutils literal notranslate"><span class="pre">OrchestratorHistoryFilter</span></code> by default:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">agent_framework.components.planners</span><span class="w"> </span><span class="kn">import</span> <span class="n">StrategicPlanner</span>

<span class="n">planner</span> <span class="o">=</span> <span class="n">StrategicPlanner</span><span class="p">(</span>
    <span class="n">worker_keys</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;worker1&quot;</span><span class="p">,</span> <span class="s2">&quot;worker2&quot;</span><span class="p">],</span>
    <span class="c1"># Automatically uses OrchestratorHistoryFilter()</span>
    <span class="n">inference_gateway</span><span class="o">=</span><span class="n">gateway</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="strategicdecomposerplanner-manager">
<h3>StrategicDecomposerPlanner (Manager)<a class="headerlink" href="#strategicdecomposerplanner-manager" title="Link to this heading"></a></h3>
<p>Uses <code class="docutils literal notranslate"><span class="pre">ManagerHistoryFilter</span></code> by default:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">agent_framework.components.planners</span><span class="w"> </span><span class="kn">import</span> <span class="n">StrategicDecomposerPlanner</span>

<span class="n">planner</span> <span class="o">=</span> <span class="n">StrategicDecomposerPlanner</span><span class="p">(</span>
    <span class="c1"># Automatically uses ManagerHistoryFilter()</span>
    <span class="n">inference_gateway</span><span class="o">=</span><span class="n">gateway</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="reactplanner-worker">
<h3>ReActPlanner (Worker)<a class="headerlink" href="#reactplanner-worker" title="Link to this heading"></a></h3>
<p>Uses <code class="docutils literal notranslate"><span class="pre">WorkerHistoryFilter</span></code> by default:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">agent_framework.components.planners</span><span class="w"> </span><span class="kn">import</span> <span class="n">ReActPlanner</span>

<span class="n">planner</span> <span class="o">=</span> <span class="n">ReActPlanner</span><span class="p">(</span>
    <span class="c1"># Automatically uses WorkerHistoryFilter()</span>
    <span class="n">inference_gateway</span><span class="o">=</span><span class="n">gateway</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="custom-filter-configuration">
<h2>Custom Filter Configuration<a class="headerlink" href="#custom-filter-configuration" title="Link to this heading"></a></h2>
<p>You can provide a custom filter to any planner:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">agent_framework.components.planners</span><span class="w"> </span><span class="kn">import</span> <span class="n">StrategicPlanner</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">agent_framework.policies.history_filters</span><span class="w"> </span><span class="kn">import</span> <span class="n">OrchestratorHistoryFilter</span>

<span class="c1"># Custom filter with specific turn limit</span>
<span class="n">custom_filter</span> <span class="o">=</span> <span class="n">OrchestratorHistoryFilter</span><span class="p">(</span><span class="n">max_conversation_turns</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

<span class="n">planner</span> <span class="o">=</span> <span class="n">StrategicPlanner</span><span class="p">(</span>
    <span class="n">worker_keys</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;worker1&quot;</span><span class="p">,</span> <span class="s2">&quot;worker2&quot;</span><span class="p">],</span>
    <span class="n">history_filter</span><span class="o">=</span><span class="n">custom_filter</span><span class="p">,</span>
    <span class="n">inference_gateway</span><span class="o">=</span><span class="n">gateway</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="turn-boundary-scoping">
<h2>Turn Boundary Scoping<a class="headerlink" href="#turn-boundary-scoping" title="Link to this heading"></a></h2>
<p>Filters use turn boundaries marked by <code class="docutils literal notranslate"><span class="pre">{&quot;type&quot;:</span> <span class="pre">&quot;task&quot;}</span></code> entries. The framework provides a helper method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">_find_last_task_marker</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">history</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Find index of last &#39;task&#39; entry (marks turn boundary).&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">history</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">history</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;task&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">i</span>
    <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
</pre></div>
</div>
<p>This ensures:</p>
<ul class="simple">
<li><p><strong>Completion Detection</strong>: Only checks entries after last <code class="docutils literal notranslate"><span class="pre">task</span></code> marker</p></li>
<li><p><strong>Worker Filtering</strong>: Only includes current turn traces</p></li>
<li><p><strong>Turn Isolation</strong>: Previous turns don’t pollute current context</p></li>
</ul>
</section>
<section id="message-type-constants">
<h2>Message Type Constants<a class="headerlink" href="#message-type-constants" title="Link to this heading"></a></h2>
<p>The framework uses constants for message types (defined in <code class="docutils literal notranslate"><span class="pre">agent_framework.constants</span></code>):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Conversation types</span>
<span class="n">USER_MESSAGE</span> <span class="o">=</span> <span class="s2">&quot;user_message&quot;</span>
<span class="n">ASSISTANT_MESSAGE</span> <span class="o">=</span> <span class="s2">&quot;assistant_message&quot;</span>

<span class="c1"># Execution trace types</span>
<span class="n">TASK</span> <span class="o">=</span> <span class="s2">&quot;task&quot;</span>
<span class="n">ACTION</span> <span class="o">=</span> <span class="s2">&quot;action&quot;</span>
<span class="n">OBSERVATION</span> <span class="o">=</span> <span class="s2">&quot;observation&quot;</span>
<span class="n">ERROR</span> <span class="o">=</span> <span class="s2">&quot;error&quot;</span>

<span class="c1"># Completion types</span>
<span class="n">FINAL</span> <span class="o">=</span> <span class="s2">&quot;final&quot;</span>
<span class="n">SYNTHESIS</span> <span class="o">=</span> <span class="s2">&quot;synthesis&quot;</span>

<span class="c1"># Type collections</span>
<span class="n">CONVERSATION_TYPES</span> <span class="o">=</span> <span class="p">[</span><span class="n">USER_MESSAGE</span><span class="p">,</span> <span class="n">ASSISTANT_MESSAGE</span><span class="p">]</span>
<span class="n">EXECUTION_TRACE_TYPES</span> <span class="o">=</span> <span class="p">[</span><span class="n">TASK</span><span class="p">,</span> <span class="n">ACTION</span><span class="p">,</span> <span class="n">OBSERVATION</span><span class="p">,</span> <span class="n">ERROR</span><span class="p">]</span>
<span class="n">COMPLETION_TYPES</span> <span class="o">=</span> <span class="p">[</span><span class="n">FINAL</span><span class="p">,</span> <span class="n">SYNTHESIS</span><span class="p">]</span>
</pre></div>
</div>
<p>Filters use these constants to categorize and filter history entries.</p>
</section>
<section id="benefits">
<h2>Benefits<a class="headerlink" href="#benefits" title="Link to this heading"></a></h2>
<ol class="arabic simple">
<li><p><strong>Token Efficiency</strong>: Only relevant context included per role</p></li>
<li><p><strong>Context Clarity</strong>: No noise from irrelevant history</p></li>
<li><p><strong>No Completion Pollution</strong>: Turn-scoped filtering prevents false positives</p></li>
<li><p><strong>Hierarchical Clarity</strong>: Each role sees appropriate level of detail</p></li>
<li><p><strong>Better Performance</strong>: Smaller prompts = faster LLM calls</p></li>
<li><p><strong>Backward Compatible</strong>: Default filters match existing behavior</p></li>
</ol>
</section>
<section id="completion-detection-integration">
<h2>Completion Detection Integration<a class="headerlink" href="#completion-detection-integration" title="Link to this heading"></a></h2>
<p>The completion detection system also uses turn-scoped history to prevent false positives:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># In DefaultCompletionDetector</span>
<span class="k">def</span><span class="w"> </span><span class="nf">is_complete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">result</span><span class="p">,</span> <span class="n">history</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
    <span class="c1"># Only check current turn for completion signals</span>
    <span class="n">current_turn_history</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_current_turn_history</span><span class="p">(</span><span class="n">history</span><span class="p">)</span>
    
    <span class="c1"># Check for completion signals in current turn only</span>
    <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="n">current_turn_history</span><span class="p">[</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">check_history_depth</span><span class="p">:]):</span>
        <span class="k">if</span> <span class="n">entry</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">)</span> <span class="ow">in</span> <span class="n">COMPLETION_TYPES</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
    <span class="k">return</span> <span class="kc">False</span>
</pre></div>
</div>
<p>This ensures previous turn completions don’t trigger premature termination.</p>
</section>
<section id="architecture-flow">
<h2>Architecture Flow<a class="headerlink" href="#architecture-flow" title="Link to this heading"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>User Message
    │
    ▼
Orchestrator (OrchestratorHistoryFilter)
├─ Sees: Last 8 conversation turns only
├─ Plans: High-level strategic plan
└─ Delegates: To managers with phase context
    │
    ▼
Manager (ManagerHistoryFilter)
├─ Sees: Previous phase synthesis only (if sequential)
├─ Plans: Phase-specific execution plan
└─ Delegates: To workers with task context
    │
    ▼
Worker (WorkerHistoryFilter)
├─ Sees: Current turn execution traces only
├─ Executes: Tools and actions
└─ Returns: Results to manager
    │
    ▼
Manager Synthesizes
    │
    ▼
Orchestrator Receives Result
</pre></div>
</div>
</section>
<section id="backward-compatibility">
<h2>Backward Compatibility<a class="headerlink" href="#backward-compatibility" title="Link to this heading"></a></h2>
<p>✅ <strong>Fully backward compatible</strong></p>
<ul class="simple">
<li><p>Default filters match existing behavior</p></li>
<li><p>Filters can be disabled by passing <code class="docutils literal notranslate"><span class="pre">DefaultHistoryFilter()</span></code> (returns all history)</p></li>
<li><p>No breaking API changes</p></li>
<li><p>Existing code continues to work without modification</p></li>
</ul>
</section>
<section id="creating-custom-filters">
<h2>Creating Custom Filters<a class="headerlink" href="#creating-custom-filters" title="Link to this heading"></a></h2>
<p>You can create custom filters by implementing the <code class="docutils literal notranslate"><span class="pre">HistoryFilter</span></code> interface:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">agent_framework.policies.base</span><span class="w"> </span><span class="kn">import</span> <span class="n">HistoryFilter</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">List</span>

<span class="k">class</span><span class="w"> </span><span class="nc">CustomHistoryFilter</span><span class="p">(</span><span class="n">HistoryFilter</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Custom filter for specific use case.&quot;&quot;&quot;</span>
    
    <span class="k">def</span><span class="w"> </span><span class="nf">filter_for_prompt</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">history</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]],</span>
        <span class="n">context</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
        <span class="c1"># Your custom filtering logic</span>
        <span class="n">filtered</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">e</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">history</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_should_include</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
        <span class="p">]</span>
        <span class="k">return</span> <span class="n">filtered</span>
    
    <span class="k">def</span><span class="w"> </span><span class="nf">_should_include</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entry</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">context</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="c1"># Your custom inclusion logic</span>
        <span class="k">return</span> <span class="kc">True</span>
</pre></div>
</div>
</section>
<section id="planner-filter-usage">
<h2>Planner Filter Usage<a class="headerlink" href="#planner-filter-usage" title="Link to this heading"></a></h2>
<p>The framework applies filters automatically to core planners:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Planner</p></th>
<th class="head"><p>Filter Used</p></th>
<th class="head"><p>Status</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">StrategicPlanner</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">OrchestratorHistoryFilter</span></code></p></td>
<td><p>✅ Automatic</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">StrategicDecomposerPlanner</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ManagerHistoryFilter</span></code></p></td>
<td><p>✅ Automatic</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ReActPlanner</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">WorkerHistoryFilter</span></code></p></td>
<td><p>✅ Automatic</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ChatPlanner</span></code></p></td>
<td><p>Manual filtering (conversation types only)</p></td>
<td><p>⚠️ Manual</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">WorkerRouterPlanner</span></code></p></td>
<td><p>Manual filtering (conversation types only)</p></td>
<td><p>⚠️ Manual</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ManagerScriptPlanner</span></code></p></td>
<td><p>Manual filtering (synthesis entries)</p></td>
<td><p>⚠️ Manual</p></td>
</tr>
</tbody>
</table>
<p><strong>Core planners</strong> (Strategic, StrategicDecomposer, ReAct) use the filter system automatically.<br />
<strong>Router/chat planners</strong> use manual filtering appropriate for their simpler routing needs.</p>
</section>
<section id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Link to this heading"></a></h2>
<p>The hierarchical filtering system provides:</p>
<ul class="simple">
<li><p><strong>Role-appropriate context</strong>: Each agent role sees only relevant history</p></li>
<li><p><strong>Automatic application</strong>: Default filters applied automatically by core planners</p></li>
<li><p><strong>Customizable</strong>: Can provide custom filters per planner</p></li>
<li><p><strong>Turn-scoped</strong>: Prevents pollution from previous turns</p></li>
<li><p><strong>Efficient</strong>: Reduces token usage and improves performance</p></li>
<li><p><strong>Compatible</strong>: Backward compatible with existing code</p></li>
</ul>
<p>The framework handles all filtering automatically for core planners, but you can customize it as needed for your specific use cases.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Legacy Guides" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="architecture_workflow.html" class="btn btn-neutral float-right" title="Framework Architecture &amp; Workflow" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2026, Project Authors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>